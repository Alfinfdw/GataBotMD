import fs from 'fs'
import fetch from 'node-fetch'
import { xpRange } from '../lib/levelling.js'
const { levelling } = '../lib/levelling.js'
import moment from 'moment-timezone'
let handler = async (m, { conn, usedPrefix, command, args, isOwner, isAdmin, isROwner }) => {
//let userr = global.db.data.users[m.sender]
//userr.registered = false
let locale = 'es'
let d = new Date(new Date + 3600000)
let time = d.toLocaleTimeString(locale, {
      hour: 'numeric',
      minute: 'numeric',
      second: 'numeric'
    })
//let _uptime = process.uptime() * 1000
//let _muptime
//if (process.send) {
//process.send('uptime')
//let uptime = clockString(_uptime)

let _uptime = process.uptime() * 1000
let uptime = clockString(_uptime) 

wm = global.wm
vs = global.vs
let { exp, limit, level, role } = global.db.data.users[m.sender]
let { min, xp, max } = xpRange(level, global.multiplier)
//let name = await conn.getName(m.sender)
const sections = [
{
title: `ğ™‡ğ™„ğ™ğ™ğ˜¼ ğ˜¿ğ™€ğ™ğ™‹ğ™‡ğ™€ğ™‚ğ˜¼ğ˜½ğ™‡ğ™€ | ğ˜¿ğ™ğ™Šğ™‹-ğ˜¿ğ™Šğ™’ğ™‰ ğ™‡ğ™„ğ™ğ™`,
rows: [
      {title: "ğŸ’– Owner ğŸ’–", description: null, rowId: `${usedPrefix}creadora`},
      {title: "ğŸ’– DONASI ğŸ’–", description: null, rowId: `${usedPrefix}donar`},
      {title: "ğŸˆ Cara install GataBot-MD ğŸˆ", description: null, rowId: `${usedPrefix}instalarbot`},
      {title: "ğŸ¤– JadiBot (maintance} ğŸ¤–", description: null, rowId: `${usedPrefix}jadibot`},
      {title: "ğŸš€ Speed GojoBotzMD ğŸš€", description: null, rowId: `${usedPrefix}ping`},
      {title: "ğŸŒ€ AllMenu ğŸŒ€", description: null, rowId: `${usedPrefix}allmenu`},
      {title: "ğŸŒŸ InfoMenu ğŸŒŸ", description: null, rowId: `${usedPrefix}infomenu`},
      {title: "ğŸ… ListPremium ğŸ…", description: null, rowId: `${usedPrefix}listprem`},
      {title: "ğŸ’ Inventory ğŸ’", description: null, rowId: `${usedPrefix}buy`}, 
      {title: "ğŸ¡ GameMenu ğŸ¡", description: null, rowId: `${usedPrefix}juegosmenu`},
      {title: "ğŸ§° AudioMenu ğŸ§°", description: null, rowId: `${usedPrefix}audioefectomenu`},
      {title: "ğŸ”° GroupMenu ğŸ”°", description: null, rowId: `${usedPrefix}grupomenu`},
      {title: "âš™ï¸ Pengaturan âš™ï¸", description: null, rowId: `${usedPrefix}on`}, 
      {title: "ğŸˆ StickerMenu ğŸˆ", description: null, rowId: `${usedPrefix}stickermenu`},
      {title: "ğŸ›°ï¸ ConvertMenu ğŸ›°ï¸", description: null, rowId: `${usedPrefix}convertidormenu`},
      {title: "âœ¨ MakerMenu âœ¨", description: null, rowId: `${usedPrefix}makermenu`},
      {title: "ğŸ“² DownloadMenu ğŸ“²", description: null, rowId: `${usedPrefix}descargasmenu`},
      {title: "ğŸ” SearchMenu ğŸ”", description: null, rowId: `${usedPrefix}buscarmenu`},
      {title: "â›©ï¸ RandomMenu â›©ï¸", description: null, rowId: `${usedPrefix}randommenu`},
      {title: "ğŸ” HorrnyMenu ğŸ”", description: null, rowId: `${usedPrefix}hornymenu`},
      {title: "âš—ï¸ RpgMenu âš—ï¸", description: null, rowId: `${usedPrefix}rpgmenu`},
      {title: "ğŸ‘¨â€ğŸ’» OwnerMenu ğŸ‘¨â€ğŸ’»", description: null, rowId: `${usedPrefix}ownermenu`},
      {title: "ğŸ“„ ğ™ğ™€ğ™ğ™ˆğ™„ğ™‰ğ™Šğ™, ğ˜¾ğ™Šğ™‰ğ˜¿ğ™„ğ˜¾ğ™„ğ™Šğ™‰ğ™€ğ™ ğ™” ğ™‹ğ™ğ™„ğ™‘ğ˜¼ğ˜¾ğ™„ğ˜¿ğ˜¼ğ˜¿ ğŸ“„", description: null, rowId: `tÃ©rminos`},
      

]}, ]
 
let name = await conn.getName(m.sender)
let pareja = global.db.data.users[m.sender].pasangan 
let enlace = { contextInfo: { externalAdReply: {title: wm, body: 'support group' , sourceUrl: nna, thumbnail: await(await fetch(img)).buffer() }}}
//let name = conn.getName(m.sender)
const listMessage = {
text: `ListMenu GojoBotzMD`, //${name} ${ucapan()}
title: null,
buttonText: "ğ™‡ğ™„ğ™ğ™ğ˜¼ ğ˜¿ğ™€ ğ™ˆğ™€ğ™‰ğ™ : ğ™‡ğ™„ğ™ğ™ ğ™ˆğ™€ğ™‰ğ™", 
sections }

let imagen = './media/menus/Menu3.jpg'
let ftroli = { key: { fromMe: false, "participant":"0@s.whatsapp.net", "remoteJid": "6289523258649-1604595598@g.us" }, "message": { orderMessage: { itemCount: 6546464643, status: 200, thumbnail: imagen, surface: 200, message: wm, orderTitle: wm, sellerJid: '0@s.whatsapp.net' }}, contextInfo: { "forwardingScore": 999, "isForwarded": true}, sendEphemeral: true}  

const fkontak = {
	"key": {
    "participants":"0@s.whatsapp.net",
		"remoteJid": "status@broadcast",
		"fromMe": false,
		"id": "Halo"
	},
	"message": {
		"contactMessage": {
			"vcard": `BEGIN:VCARD\nVERSION:3.0\nN:Sy;Bot;;;\nFN:y\nitem1.TEL;waid=${m.sender.split('@')[0]}:${m.sender.split('@')[0]}\nitem1.X-ABLabel:Ponsel\nEND:VCARD`
		}
	},
	"participant": "0@s.whatsapp.net"
}
await conn.sendMessage(m.chat, listMessage, {quoted: fkontak})
}
handler.help = ['en', 'dis'].map(v => v + 'able <option>')
handler.tags = ['group', 'owner']
handler.command = /^(menu|menÃº|memu|memÃº|help|info|comandos|2help|menu1.2|ayuda|commands|commandos|m|\?)$/i
//handler.register = true
handler.exp = 50
export default handler

function clockString(ms) {
  let h = isNaN(ms) ? '--' : Math.floor(ms / 3600000)
  let m = isNaN(ms) ? '--' : Math.floor(ms / 60000) % 60
  let s = isNaN(ms) ? '--' : Math.floor(ms / 1000) % 60
  return [h, m, s].map(v => v.toString().padStart(2, 0)).join(':')
}

function ucapan() {
  const time = moment.tz('America/Los_Angeles').format('HH')  //America/Los_Angeles  Asia/Jakarta   America/Toronto
  let res = "ğŸ‘‹ *BIENVENIDO(A) | WELCOME* ğŸ‘‹"
  if (time >= 4) {
    res = "ğŸŒ‡ *Buenos DÃ­as | Good Morning* â›…"
  }
  if (time >= 11) {
    res = "ğŸ™ï¸ *Buenas Tardes | Good Afternoon* ğŸŒ¤ï¸"
  }
  if (time >= 15) {
    res = "ğŸŒ† *Buenas tardes | Good Afternoon* ğŸŒ¥ï¸"
  }
  if (time >= 17) {
    res = "ğŸŒƒ *Buenas noches | Good Evening* ğŸ’«"
  }
  return res
} 



/*import { xpRange } from '../lib/levelling.js'
const { levelling } = '../lib/levelling.js'
import moment from 'moment-timezone'
let handler = async (m, { conn, usedPrefix, command, args, isOwner, isAdmin, isROwner }) => {
//let userr = global.db.data.users[m.sender]
//userr.registered = false
let locale = 'es'
let d = new Date(new Date + 3600000)
let time = d.toLocaleTimeString(locale, {
      hour: 'numeric',
      minute: 'numeric',
      second: 'numeric'
    })
//let _uptime = process.uptime() * 1000
//let _muptime
//if (process.send) {
//process.send('uptime')
//let uptime = clockString(_uptime)

let _uptime = process.uptime() * 1000
let uptime = clockString(_uptime) 

wm = global.wm
vs = global.vs
let { exp, limit, level, role } = global.db.data.users[m.sender]
let { min, xp, max } = xpRange(level, global.multiplier)
//let name = await conn.getName(m.sender)

let name = await conn.getName(m.sender)
//let name = conn.getName(m.sender)

let menu = `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€\nâ”‚${ucapan()}\nâ”‚ğŸ’–â€¢.Â¸ğŸ’Â¸.â€¢ *${name}* â€¢.Â¸ğŸ’Â¸.â€¢ğŸ’–\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€
â•­â”â”ã€” *${wm}* ã€•â”â”â¬£
â”ƒâœª *Tiempo Actual | Current Time*	    
â”ƒâº ${time}   
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒâœª *Activa durante | Active during* 
â”ƒâº ${uptime}
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒâœª *VersiÃ³n de GataBot-MD*
â”ƒâº ${vs}
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒâœª *Usuario(s) | Users*
â”ƒâº ${Object.keys(global.db.data.users).length} 
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒâœª *Modo | Mode*
â”ƒâº ${global.opts['self'] ? 'ğ™‹ğ™ğ™„ğ™‘ğ˜¼ğ˜¿ğ™Š - ğ™‹ğ™ğ™„ğ™‘ğ˜¼ğ™ğ™€' : 'ğ™‹ğ™ğ˜½ğ™‡ğ™„ğ˜¾ğ™Š - ğ™‹ğ™ğ˜½ğ™‡ğ™„ğ˜¾'}
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒâœª *Chat(s) Prohibido(s) | Forbidden Chats*
â”ƒâº ${Object.entries(global.db.data.chats).filter(chat => chat[1].isBanned).length} 
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒâœª *Usuario(s) Prohibido(s) | Prohibited Users*
â”ƒâº ${Object.entries(global.db.data.users).filter(user => user[1].banned).length}
â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â¬£`
//menulista
let menulista = `
â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â¬£
â”ƒ âš¡ ListMenu GojoBotzMD âš¡
â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â¬£
${readMore}
â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â¬£
â”ƒ ğŸ‘¨â€ğŸ’» Owner ğŸ‘¨â€ğŸ’»
â”ƒ _${usedPrefix}creadora_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ’– Donasi ğŸ’–
â”ƒ _${usedPrefix}donar_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸš€ Speed GojoBotzMD ğŸš€
â”ƒ _${usedPrefix}ping_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸŒ€ AllMenu ğŸŒ€
â”ƒ _${usedPrefix}allmenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸŒŸ InfoMenu ğŸŒŸ
â”ƒ _${usedPrefix}infomenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ¡ GamesMenu ğŸ¡
â”ƒ _${usedPrefix}juegosmenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ§° AudioMenu ğŸ§°
â”ƒ _${usedPrefix}audioefectomenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ”° GroupMeny ğŸ”°
â”ƒ _${usedPrefix}grupomenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ âš™ï¸ Pengaturan Group âš™ï¸
â”ƒ _${usedPrefix}on_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸˆ StickerMenu ğŸˆ
â”ƒ _${usedPrefix}stickermenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ›°ï¸ ConvertMenu ğŸ›°ï¸
â”ƒ _${usedPrefix}convertidormenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ âœ¨ MakerMenu âœ¨
â”ƒ _${usedPrefix}makermenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ“² DownloadMenu ğŸ“²
â”ƒ _${usedPrefix}descargasmenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ” SearchMenu ğŸ”
â”ƒ _${usedPrefix}buscarmenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ â›©ï¸ RandomMenu â›©ï¸
â”ƒ _${usedPrefix}randommenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ” HorrnyMenu ğŸ”
â”ƒ _${usedPrefix}hornymenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ âš—ï¸ RpgMenu âš—ï¸
â”ƒ _${usedPrefix}rpgmenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ’ OwnerMenu ğŸ’
â”ƒ _${usedPrefix}ownermenu_
â”ƒ   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
â”ƒ ğŸ“„ ğ™ğ™€ğ™ğ™ˆğ™„ğ™‰ğ™Šğ™, ğ˜¾ğ™Šğ™‰ğ˜¿ğ™„ğ˜¾ğ™„ğ™Šğ™‰ğ™€ğ™ 
â”ƒ ğ™” ğ™‹ğ™ğ™„ğ™‘ğ˜¼ğ˜¾ğ™„ğ˜¿ğ˜¼ğ˜¿ ğŸ“„
â”ƒ _TÃ©rminos_
â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â¬£`

const fkontak = {
	"key": {
    "participants":"0@s.whatsapp.net",
		"remoteJid": "status@broadcast",
		"fromMe": false,
		"id": "Halo"
	},
	"message": {
		"contactMessage": {
			"vcard": `BEGIN:VCARD\nVERSION:3.0\nN:Sy;Bot;;;\nFN:y\nitem1.TEL;waid=${m.sender.split('@')[0]}:${m.sender.split('@')[0]}\nitem1.X-ABLabel:Ponsel\nEND:VCARD`
		}
	},
	"participant": "0@s.whatsapp.net"
} 
await conn.sendMessage(m.chat, { text: menu, mentions: [m.sender] }, { quoted: fkontak, m })
await conn.sendMessage(m.chat, { text: menulista, mentions: [m.sender] }, { quoted: fkontak, m })
	
}
handler.help = ['en', 'dis'].map(v => v + 'able <option>')
handler.tags = ['group', 'owner']
handler.command = /^(menu|menÃº|memu|memÃº|help|info|comandos|2help|menu1.2|ayuda|commands|commandos|m|\?)$/i
//handler.register = true
handler.exp = 50
export default handler

const more = String.fromCharCode(8206)
const readMore = more.repeat(4001)

function clockString(ms) {
  let h = isNaN(ms) ? '--' : Math.floor(ms / 3600000)
  let m = isNaN(ms) ? '--' : Math.floor(ms / 60000) % 60
  let s = isNaN(ms) ? '--' : Math.floor(ms / 1000) % 60
  return [h, m, s].map(v => v.toString().padStart(2, 0)).join(':')
}

function ucapan() {
  const time = moment.tz('America/Los_Angeles').format('HH')  //America/Los_Angeles  Asia/Jakarta   America/Toronto
  let res = "ğŸ‘‹ *BIENVENIDO(A) | WELCOME* ğŸ‘‹"
  if (time >= 4) {
    res = "ğŸŒ‡ *Buenos DÃ­as | Good Morning* â›…"
  }
  if (time >= 11) {
    res = "ğŸ™ï¸ *Buenas Tardes | Good Afternoon* ğŸŒ¤ï¸"
  }
  if (time >= 15) {
    res = "ğŸŒ† *Buenas tardes | Good Afternoon* ğŸŒ¥ï¸"
  }
  if (time >= 17) {
    res = "ğŸŒƒ *Buenas noches | Good Evening* ğŸ’«"
  }
  return res
}*/

